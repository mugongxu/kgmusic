(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},120:function(e,t,n){},122:function(e,t,n){},126:function(e,t,n){},236:function(e,t,n){},238:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(30),s=n.n(c),i=(n(95),n(97),n(4)),o=n.n(i),l=n(9),u=n(5),m=n(6),p=n(7),f=n(8),h=n(3),d=(n(100),n(244)),v=n(241),g=n(10),y=n(13),b=n(11),E=n(86),k=n.n(E).a.create({timeout:1e4});k.interceptors.request.use(function(e){return Object(y.a)({},e)}),k.interceptors.response.use(function(e){return 200!==e.status?Promise.reject("Http \u72b6\u6001\u5f02\u5e38 ".concat(e.status)):0!==e.data.status?Promise.reject(e.data.errorMessage):e.data},function(e){return Promise.reject(e)});var j=k,O=function(e){if(e=Number(e.toFixed(0))){var t=Math.floor(e/60),n=e-60*t;return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)}return"00:00"};n(120);function N(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var w=function(e){Object(p.a)(n,e);var t=N(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={hash:"",songInfo:{},songsList:[],index:0,pause:!1,currentTime:0,currentTimeStr:"00:00",duration:0,durationStr:"00:00",lyricsList:[]},a.ftPlayer=r.a.createRef(),a.panelPlay=r.a.createRef(),a.panelPlayLrc=r.a.createRef(),a.songTimer=null,a.currentIndex=0,a.pauseSong=a.pauseSong.bind(Object(b.a)(a)),a.nextSong=a.nextSong.bind(Object(b.a)(a)),a.prevSong=a.prevSong.bind(Object(b.a)(a)),a.downloadSong=a.downloadSong.bind(Object(b.a)(a)),a.showPanelPlay=a.showPanelPlay.bind(Object(b.a)(a)),a.goBack=a.goBack.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.listenSongPlayEnd(),this.listenSongOnPlay()}},{key:"showFtPlayer",value:function(e,t){var n=this;this.setState({songsList:e,index:t},function(){n.getSongInfo()})}},{key:"getSongInfo",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r,c,s,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.currentIndex=0,t=this.state.songsList[this.state.index],this.ftPlayer.current.style.display="block",n=t.hash,this.setState({hash:n}),e.next=7,j.get("/km/song/detail",{params:{hash:n}});case 7:if(a=e.sent,(r=a.data||{}).url){e.next=12;break}return this.nextSong(),e.abrupt("return");case 12:r.imgUrl=r.imgUrl.replace("{size}","400"),r.album_img=r.album_img.replace("{size}","400"),this.setState({songInfo:Object(y.a)({},r),pause:!1}),(c=document.getElementById("kumao")).src=r.url||r.backup_url[0]||"",console.log(c.src),c.load(),c.play(),s=r.lyrics.split(/\n/),i=[],s.forEach(function(e){if(e){var t=e.split("]"),n=(t[0]||"").replace("[","").split(":"),a=(60*Number(n[0]||0)+Number(n[1]||0)).toFixed(2);i.push({timestamp:Number(a),lyrics:t[1]||""})}}),this.setState({lyricsList:i});case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"pauseSong",value:function(){var e=document.getElementById("kumao"),t=this.state.pause;t?e.play():e.pause(),this.setState({pause:!t})}},{key:"nextSong",value:function(){var e=this,t=this.state.index;t=t<this.state.songsList.length-1?t+1:0,this.setState({index:t},function(){e.getSongInfo()})}},{key:"prevSong",value:function(){var e=this,t=this.state.index,n=this.state.songsList.length;t=t?t-1:n-1,this.setState({index:t},function(){e.getSongInfo()})}},{key:"downloadSong",value:function(){}},{key:"listenSongPlayEnd",value:function(){var e=this;document.getElementById("kumao").addEventListener("ended",function(){e.nextSong()},!1)}},{key:"listenSongOnPlay",value:function(){var e=this,t=document.getElementById("kumao");t.addEventListener("timeupdate",function(){var n=Number(t.currentTime.toFixed(2)),a=t.duration;e.setState({currentTime:n,duration:a,currentTimeStr:O(n),durationStr:O(a)},function(){e.panelPlayLrc.current.scrollTop=e.currentIndex?1.7857*(e.currentIndex-1)*16:0})})}},{key:"showPanelPlay",value:function(){this.panelPlay.current.style.display="block"}},{key:"goBack",value:function(){this.panelPlay.current.style.display="none"}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"songs-play-wrapper"},r.a.createElement("div",{className:"ft-player",ref:this.ftPlayer},r.a.createElement("div",{className:"ft-go-info",onClick:this.showPanelPlay},r.a.createElement("div",{className:"ft-left"},r.a.createElement("img",{src:this.state.songInfo.imgUrl,onError:function(){return e.src=e.state.songInfo.album_img},alt:""})),r.a.createElement("div",{className:"ft-center"},r.a.createElement("p",{className:"ft-desc"},this.state.songInfo.filename),r.a.createElement("p",{className:"ft-sub-desc"},this.state.songInfo.singerName))),r.a.createElement("div",{className:"ft-right"},r.a.createElement("i",{className:this.state.pause?"btn-play":"btn-pause",onClick:this.pauseSong}),r.a.createElement("i",{className:"btn-next",onClick:this.nextSong}),r.a.createElement("i",{className:"ft-icon-download",onClick:this.downloadSong}))),r.a.createElement("div",{className:"panel-play",ref:this.panelPlay},r.a.createElement("div",{className:"bg-overlay",style:{backgroundImage:'url("'.concat(this.state.songInfo.album_img||this.state.songInfo.imgUrl,'")')}}),r.a.createElement("div",{className:"play-overlay"}),r.a.createElement("div",{className:"top-fixes"},r.a.createElement("p",{className:"title",id:"title"},this.state.songInfo.filename),r.a.createElement("div",{className:"goback",onClick:this.goBack},r.a.createElement("i",null))),r.a.createElement("div",{className:"panel-play-bd"},r.a.createElement("div",{className:"panel-play-img-box"},r.a.createElement("img",{src:this.state.songInfo.album_img,onError:function(){return e.src=e.state.songInfo.imgUrl},alt:""})),r.a.createElement("div",{className:"panel-play-lrc-box"},r.a.createElement("div",{className:"panel-play-lrc",ref:this.panelPlayLrc},this.state.lyricsList.map(function(t,n){var a="",c=t.timestamp,s=e.state.currentTime,i=e.state.lyricsList[n+1]?e.state.lyricsList[n+1].timestamp:e.state.duration;return s>=c&&s<i&&(a="current",e.currentIndex=n),r.a.createElement("p",{key:n,className:a},t.lyrics)}))),r.a.createElement("div",{className:"time-wrap"},r.a.createElement("div",{className:"timeshow"},this.state.currentTimeStr),r.a.createElement("div",{className:"progress-wrap"},r.a.createElement("div",{className:"progress-bar"},r.a.createElement("div",{className:"preview-progress"}),r.a.createElement("div",{className:"progress",style:{width:"".concat(this.state.currentTime/this.state.duration*100,"%")}},r.a.createElement("span",null)))),r.a.createElement("div",{className:"time"},this.state.durationStr)),r.a.createElement("div",{className:"play-operate"},r.a.createElement("i",{className:"btn-prev",onClick:this.prevSong}),r.a.createElement("i",{className:this.state.pause?"btn-play":"btn-pause",onClick:this.pauseSong}),r.a.createElement("i",{className:"btn-next",onClick:this.nextSong})))),r.a.createElement("div",{id:"player",className:"player"},r.a.createElement("audio",{id:"kumao",width:"100%",height:"100%",controls:!0})))}}]),n}(a.Component);n(122);function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var x=function(e){Object(p.a)(n,e);var t=S(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={rank:e.rank},a.playBox=r.a.createRef(),a}return Object(m.a)(n,[{key:"playSongs",value:function(e,t){this.playBox.current.showFtPlayer(this.props.songsList,e)}},{key:"render",value:function(){var e=this,t=["one","two","three"];return r.a.createElement("div",null,r.a.createElement("ul",{className:this.state.rank?"songslist rank-songsList":"songslist"},this.props.songsList.map(function(n,a){return r.a.createElement("li",{key:a,className:"songslist-item",onClick:e.playSongs.bind(e,a)},r.a.createElement("div",{className:"songs-item-name"},r.a.createElement("span",null,n.filename)),r.a.createElement("div",{className:"songs-item-download"},r.a.createElement("i",null)),e.state.rank?r.a.createElement("span",{className:t[a]?"songs-item-num "+t[a]:"songs-item-num"},a+1):"")})),r.a.createElement(w,{ref:this.playBox}))}}]),n}(a.Component),R=n(29),L=n.n(R),P=n(87),C=n.n(P),D=n(24);function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}n(124);var T=function(e){Object(p.a)(n,e);var t=I(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).renderContent=a.renderContent.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.buildSwiper()}},{key:"componentDidUpdate",value:function(){if("undefined"!==typeof this.swiper){var e=this.props,t=e.rebuildOnUpdate,n=e.shouldSwiperUpdate,a=e.activeSlideKey;if(t)this.rebuildSwiper();else if(n){this.updateSwiper();var c=this.swiper.slides.length;if(c<=this.swiper.activeIndex){var s=Math.max(c-1,0);this.swiper.slideTo(s)}}if(a){var i=null,o=0;r.a.Children.forEach(this.props.children,function(e){e&&(e.key===a&&(i=o),o+=1)}),null!==i&&this.swiper.slideTo(i)}}}},{key:"componentWillUnmount",value:function(){"undefined"!==typeof this.swiper&&this.swiper.destroy(!0,!0),delete this.swiper}},{key:"buildSwiper",value:function(){this.swiper=new C.a(s.a.findDOMNode(this),L()({},this.props))}},{key:"rebuildSwiper",value:function(){this.swiper.destroy(!0,!0),this.buildSwiper()}},{key:"updateSwiper",value:function(){"undefined"!==typeof this.swiper&&this.swiper.update()}},{key:"renderContent",value:function(e){if(!e)return!1;var t=this.props,n=t.slideClass,a=t.noSwiping,c=[n,e.props.className];return a&&c.push("swiper-no-swiping"),r.a.cloneElement(e,Object(y.a)({},e.props,{className:c.join(" ").trim()}))}},{key:"render",value:function(){var e=this.props,t=e.ContainerEl,n=e.WrapperEl,a=e.containerClass,c=e.wrapperClass,s=e.children,i=e.rtl,o=e.scrollbar,l=e.renderScrollbar,u=e.pagination,m=e.renderPagination,p=e.navigation,f=e.renderPrevButton,h=e.renderNextButton;return r.a.createElement(t,{className:a,dir:i&&"rtl"},r.a.createElement(n,{className:c},r.a.Children.map(s,this.renderContent)),u&&u.el&&m(this.props),o&&o.el&&l(this.props),p&&p.nextEl&&h(this.props),p&&p.prevEl&&f(this.props))}}]),n}(a.Component);T.defaultProps={containerClass:"swiper-container",wrapperClass:"swiper-wrapper",slideClass:"swiper-slide",ContainerEl:"div",WrapperEl:"div",renderScrollbar:function(e){var t=e.scrollbar;return r.a.createElement("div",{className:Object(D.a)(t.el)})},renderPagination:function(e){var t=e.pagination;return r.a.createElement("div",{className:Object(D.a)(t.el)})},renderPrevButton:function(e){var t=e.navigation;return r.a.createElement("div",{className:Object(D.a)(t.prevEl)})},renderNextButton:function(e){var t=e.navigation;return r.a.createElement("div",{className:Object(D.a)(t.nextEl)})}};n(126);function M(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var B=function(e){var t=e.bannerList,n={pagination:{el:".swiper-pagination",type:"bullets",clickable:!0}};return 0!==t.length?r.a.createElement(T,n,t.map(function(e,t){return r.a.createElement("div",{className:"item",key:t},r.a.createElement("img",{src:e.imgurl,alt:e.title,width:"100%",height:"auto"}))})):""},z=function(e){Object(p.a)(n,e);var t=M(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={dataInfo:"",bannerList:[],recommend:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/banner");case 2:t=e.sent,n=t.data,this.setState({bannerList:Object(g.a)(n.banner||[]),recommend:Object(g.a)(n.list||[])});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"new-songs-wrapper"},r.a.createElement("div",{className:"card-swipe"},r.a.createElement(B,{bannerList:this.state.bannerList})),r.a.createElement(x,{songsList:this.state.recommend}))}}]),n}(a.Component);n(49);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var U=function(e){Object(p.a)(n,e);var t=H(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={rankList:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/rank/list");case 2:t=e.sent,n=t.data,a=(a=n.list||[]).map(function(e){return e.imgurl=e.imgurl.replace("{size}","400"),e}),this.setState({rankList:Object(g.a)(a)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"rank-list-wrapper"},r.a.createElement("ul",{className:"rank-img-list"},this.state.rankList.map(function(e){return r.a.createElement("li",{key:e.rankid},r.a.createElement(d.a,{to:{pathname:"/nrank/info/".concat(e.rankid),title:e.rankname,hideTop:!0}},r.a.createElement("div",{className:"rank-img-left"},r.a.createElement("img",{src:e.imgurl,alt:""})),r.a.createElement("div",{className:"rank-img-content"},r.a.createElement("p",null,e.rankname)),r.a.createElement("div",{className:"rank-img-right"},r.a.createElement("i",{className:"rank-img-arrow"}))))})))}}]),n}(a.Component),F=n(89);function _(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var W=function(e){Object(p.a)(n,e);var t=_(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={rankId:e.match.params.id,bannerurl:"",songList:[],timestamp:0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/rank/info",{params:{rankId:this.state.rankId,page:1,json:!0}});case 2:t=e.sent,n=t.data,a=n.list||[],r=n.info.timestamp||0,c=(c=n.info.banner7url).replace("{size}","400"),this.setState({bannerurl:c,songList:Object(g.a)(a),timestamp:r});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"rank-info-wrapper"},r.a.createElement("div",{className:"rank-info-hd"},r.a.createElement("img",{src:this.state.bannerurl,alt:""}),r.a.createElement("div",{className:"rank-info-time"},r.a.createElement("span",null,"\u4e0a\u6b21\u66f4\u65b0\u65f6\u95f4\uff1a",Object(F.format)(1e3*this.state.timestamp,"YYYY-MM-DD")))),r.a.createElement(x,{rank:!0,songsList:this.state.songList}))}}]),n}(a.Component);n(85);function Y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var J=function(e){Object(p.a)(n,e);var t=Y(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={plistList:[],page:1,total:0,pagesize:0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.getPlistList(),document.addEventListener("scroll",this.onscroll.bind(this),!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.onscroll.bind(this),!0)}},{key:"getPlistList",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/plist/index",{params:{page:this.state.page}});case 2:t=e.sent,n=t.data,a=(a=n.list||[]).map(function(e){return e.imgurl=e.imgurl.replace("{size}","400"),e}),r=[].concat(Object(g.a)(this.state.plistList),Object(g.a)(a)),this.setState({plistList:Object(g.a)(r),total:n.total,pagesize:n.pagesize});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onscroll",value:function(){var e=this;if((document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight)===(document.documentElement.scrollHeight||document.body.scrollHeight)){var t=this.state.page,n=t+1;if(t*this.state.pagesize>=this.state.total)return;this.setState({page:n},function(){e.getPlistList()})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"plist-list-wrapper"},r.a.createElement("ul",{className:"plist-img-list"},this.state.plistList.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(d.a,{to:{pathname:"/nplist/list/".concat(e.specialid),title:e.specialname}},r.a.createElement("div",{className:"plist-img-left"},r.a.createElement("img",{src:e.imgurl,alt:""})),r.a.createElement("div",{className:"plist-img-content"},r.a.createElement("p",{className:"plist-img-content-first"},e.specialname),r.a.createElement("p",{className:"plist-img-content-sub"},r.a.createElement("i",{className:"icon-music"}),e.playcount)),r.a.createElement("div",{className:"plist-img-right"},r.a.createElement("i",{className:"plist-img-arrow"}))))})))}}]),n}(a.Component);function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var A=function(e){Object(p.a)(n,e);var t=q(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={specialid:e.match.params.id,bannerurl:"",songList:[],plistInfo:{}},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r,c;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/plist/list",{params:{specialid:this.state.specialid,json:!0}});case 2:t=e.sent,n=t.data,a=n.list||[],r=n.info||{},c=(c=r.imgurl).replace("{size}","400"),this.setState({bannerurl:c,songList:Object(g.a)(a),plistInfo:Object(y.a)({},r)});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"rank-info-wrapper"},r.a.createElement("div",{className:"rank-info-hd"},r.a.createElement("img",{src:this.state.bannerurl,alt:""})),r.a.createElement(x,{rank:!0,songsList:this.state.songList}))}}]),n}(a.Component);n(43);function K(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var G=function(e){return r.a.createElement("ul",{className:"singer-class-list"},e.classList.map(function(e){return r.a.createElement("li",{key:e.classid},r.a.createElement(d.a,{to:{pathname:"/nsinger/list/".concat(e.classid),title:e.classname}},r.a.createElement("i",{className:"singer-list-arrow"}),e.classname))}))},Q=function(e){Object(p.a)(n,e);var t=K(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={classList:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r,c,s,i,l,u,m;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/singer/class");case 2:for(t=e.sent,n=t.data,a=n.list,(r=[]).push([a[0]]),a.splice(0,1),c=a.length,s=Math.ceil(a.length/3),i=0;i<s;i++){for(l=[],u=3*i,m=0;m<3;m++)u+m<c&&l.push(a[u+m]);r.push(l)}this.setState({classList:[].concat(r)});case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"singer-class-list-wrapper"},this.state.classList.map(function(e,t){return r.a.createElement(G,{key:t,classList:e})}))}}]),n}(a.Component);function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var X=function(e){Object(p.a)(n,e);var t=V(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={classid:e.match.params.id,singerList:[]},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/singer/list/",{params:{classId:this.state.classid,json:!0}});case 2:t=e.sent,n=t.data,a=(a=n.list||[]).map(function(e){return e.imgurl=e.imgurl.replace("{size}","400"),e}),this.setState({singerList:Object(g.a)(a)});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"singer-list-wrapper"},r.a.createElement("ul",{className:"singer-img-list"},this.state.singerList.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement(d.a,{to:{pathname:"/nsinger/info/".concat(e.singerId),title:e.singerName,hideTop:!0}},r.a.createElement("div",{className:"singer-img-left"},r.a.createElement("img",{src:e.imgurl,alt:""})),r.a.createElement("div",{className:"singer-img-content"},r.a.createElement("p",null,e.singerName)),r.a.createElement("div",{className:"singer-img-right"},r.a.createElement("i",{className:"singer-img-arrow"}))))})))}}]),n}(a.Component);function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var $=function(e){Object(p.a)(n,e);var t=Z(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={singerid:e.match.params.id,bannerurl:"",songList:[],singerInfo:{},page:1,total:0,pagesize:0},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.getSongsList(),document.addEventListener("scroll",this.onscroll.bind(this),!0)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("scroll",this.onscroll.bind(this),!0)}},{key:"getSongsList",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a,r,c,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/singer/info",{params:{singerId:this.state.singerid,json:!0,page:this.state.page}});case 2:t=e.sent,n=t.data||{},a=n.list||[],r=n.info||{},c=(c=r.imgurl||"").replace("{size}","400"),s=[].concat(Object(g.a)(this.state.songList),Object(g.a)(a)),this.setState({bannerurl:c,songList:Object(g.a)(s),singerInfo:Object(y.a)({},r),total:n.total,pagesize:n.pageSize});case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"onscroll",value:function(){var e=this;if((document.documentElement.scrollTop||document.body.scrollTop)+(document.documentElement.clientHeight||document.body.clientHeight)===(document.documentElement.scrollHeight||document.body.scrollHeight)){var t=this.state.page,n=t+1;if(t*this.state.pagesize>=this.state.total)return;this.setState({page:n},function(){e.getSongsList()})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"singer-info-wrapper"},r.a.createElement("div",{className:"singer-info-hd"},r.a.createElement("img",{src:this.state.bannerurl,alt:""})),r.a.createElement(x,{songsList:this.state.songList}))}}]),n}(a.Component);n(236);function ee(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var te=function(e){Object(p.a)(n,e);var t=ee(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={hotSearchList:[],searchResultList:[],keyword:"",total:0,page:1},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a}return Object(m.a)(n,[{key:"handleChange",value:function(e){this.setState({keyword:e.target.value})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/search/hot",{params:{format:"json",plat:0,count:30}});case 2:t=e.sent,n=t.data||{},a=n.list||[],this.setState({hotSearchList:a});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchSong",value:function(){var e=Object(l.a)(o.a.mark(function e(){var t,n;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.get("/km/search/song",{params:{page:this.state.page,keyword:this.state.keyword}});case 2:t=e.sent,n=t.data||{},this.setState({searchResultList:Object(g.a)(n.list),total:n.total});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"searchHot",value:function(e){var t=this,n=this.state.hotSearchList[e].keyword;this.setState({keyword:n},function(){t.searchSong()})}},{key:"render",value:function(){var e=this,t=this.state.searchResultList.length;return r.a.createElement("div",{className:"search-wrapper"},r.a.createElement("div",{className:"search-box"},r.a.createElement("div",{className:"search-form-box"},r.a.createElement("form",{name:"searchForm",className:"search-form"},r.a.createElement("span",{className:"search-icon"}),r.a.createElement("input",{type:"text",className:"search-keyword",value:this.state.keyword,placeholder:"\u6b4c\u624b/\u6b4c\u540d/\u62fc\u97f3",onChange:this.handleChange}),r.a.createElement("input",{type:"button",className:"search-btn search-disabled-btn",value:"\u641c\u7d22",onClick:this.searchSong.bind(this)})))),r.a.createElement("div",{className:"hot-search",style:{display:t>0?"none":"block"}},r.a.createElement("div",{className:"hot-search-hd"},"\u6700\u8fd1\u70ed\u95e8"),r.a.createElement("ul",{className:"hot-search-list"},this.state.hotSearchList.map(function(t,n){return r.a.createElement("li",{key:n,onClick:e.searchHot.bind(e,n)},r.a.createElement("a",{className:"hot-keyword js-hot-keyword"},t.keyword))}))),r.a.createElement("div",{className:"search-result",style:{display:t>0?"block":"none"}},r.a.createElement("div",{className:"search-result-hd"}," \u5171\u670937\u6761\u7ed3\u679c "),r.a.createElement(x,{songsList:this.state.searchResultList})))}}]),n}(a.Component),ne=[{path:"/",name:"\u65b0\u6b4c",component:z,model:1,hideTop:!1},{path:"/nrank/list",name:"\u6392\u884c",component:U,model:1,hideTop:!1},{path:"/nplist/index",name:"\u6b4c\u5355",component:J,model:1,hideTop:!1},{path:"/nsinger/class",name:"\u6b4c\u624b",component:Q,model:1,hideTop:!1}],ae=[].concat(ne,[{path:"/nrank/info/:id",name:"\u6392\u884c\u699c",component:W,model:2,hideTop:!0},{path:"/nplist/list/:id",name:"\u6b4c\u5355",component:A,model:2,hideTop:!0},{path:"/nsinger/list/:id",name:"\u6b4c\u624b\u5217\u8868",component:X,model:2,hideTop:!1},{path:"/nsinger/info/:id",name:"\u6b4c\u624b\u4fe1\u606f",component:$,model:2,hideTop:!0},{path:"/nsearch/index",name:"\u641c\u7d22",component:te,model:2,hideTop:!1}]);n(238);function re(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var ce=function(){return r.a.createElement("div",{className:"header-nav"},r.a.createElement("ul",null,ne.map(function(e){return r.a.createElement("li",{key:e.path},r.a.createElement(d.a,{exact:!0,to:e.path,activeClassName:"cur"},e.name))})))},se=function(e){console.log(e);var t=e.match.path,n=!1,a="";ae.forEach(function(e){e.path===t&&(a=e.name,n=e.hideTop)});var c=n?"header-goback":"header-goback header-doback-bg";return r.a.createElement("div",{className:c},r.a.createElement("p",{className:"page-title",id:"page-title"},e.location.title||a),r.a.createElement("div",{className:"goback",onClick:function(){e.history.goBack()}},r.a.createElement("i",null)))},ie=function(e){Object(p.a)(n,e);var t=re(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"header-fixed"},r.a.createElement("div",{className:"top-hd"},r.a.createElement(d.a,{to:"/",className:"logo"},r.a.createElement("i",null,"\u9177\u732b\u97f3\u4e50")),r.a.createElement("div",null),r.a.createElement(d.a,{to:"/nsearch/index",className:"btn-search"})),ae.map(function(e){return 1===e.model?r.a.createElement(v.a,{exact:!0,key:e.path,path:e.path,component:ce}):r.a.createElement(v.a,{key:e.path,path:e.path,component:se})}))}}]),n}(a.Component);function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var le=function(e){Object(p.a)(n,e);var t=oe(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state=Object(y.a)({},e),a}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement("div",{className:"main-container-wrapper"},ae.map(function(e){var t=e.component,n={marginTop:e.hideTop?"3.4286rem":"6.67rem"};return r.a.createElement(v.a,{exact:!0,key:e.path,path:e.path,render:function(e){return r.a.createElement("div",{style:n},r.a.createElement(t,e))}})}))}}]),n}(a.Component),ue=n(243);function me(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var n,a=Object(h.a)(e);if(t){var r=Object(h.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.a)(this,n)}}var pe=function(e){Object(p.a)(n,e);var t=me(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={},a}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=Object(l.a)(o.a.mark(function e(){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(ue.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(ie,null),r.a.createElement(le,null)))}}]),n}(a.Component);s.a.render(r.a.createElement(pe,null),document.getElementById("root"))},43:function(e,t,n){},49:function(e,t,n){},85:function(e,t,n){},90:function(e,t,n){e.exports=n(240)},95:function(e,t,n){},97:function(e,t,n){}},[[90,2,1]]]);
//# sourceMappingURL=main.843e67d4.chunk.js.map